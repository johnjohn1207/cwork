# AI 股價預測系統

本專案是一個基於 LSTM 深度學習模型的股價預測與回測系統，使用 Streamlit 製作互動式網頁介面，並結合 yfinance 取得歷史股價資料。用戶可自訂參數，模型將預測未來股價漲跌並模擬交易策略績效。

## 主要功能
- 股票資料自動下載（yfinance）
- LSTM 模型訓練與預測
- 支援自訂訓練參數（視窗天數、訓練輪數、停損/停利等）
- 預測明日漲跌幅與目標收盤價
- 回測 AI 策略與大盤（Buy & Hold）累積收益率
- 顯示多項績效指標（RMSE、方向準確度、夏普比率、最大回撤、勝率等）
- 交易紀錄明細表

## 使用方法
1. 安裝依賴：
   ```bash
   pip install -r requirements.txt
   ```
2. 啟動網頁：
   ```bash
   streamlit run app.py
   ```
3. 於網頁介面輸入股票代號與參數，點擊「執行 AI 訓練與預測」即可。

## 主要參數說明
- 股票代號：如 2330.TW、AAPL
- 滑動視窗天數（Look Back）：用於 LSTM 的歷史資料長度
- 訓練輪數（Epochs）：模型訓練次數
- 初始本金：模擬交易的起始資金
- 停損/停利比例：自動賣出條件

## 主要技術
- Python
- Streamlit
- PyTorch
- yfinance
- scikit-learn
- matplotlib

## 檔案說明
- `app.py`：主程式，包含資料下載、特徵工程、模型訓練、預測、回測與前端介面
- `requirements.txt`：依賴套件列表
- `cuda.py`、`apptest.py`：輔助或測試用檔案（如有）

## 注意事項
- 本系統僅供學術與技術交流，無任何投資建議。
- 若遇到資料缺失或型態錯誤，請確認輸入參數與網路連線。

## 策略判斷範例

假設模型預測明日報酬率為 +1.2%，則：
- AI 會在今天收盤時「買進」股票。

若隔天模型預測報酬率為 -0.5%，則：
- AI 會在今天收盤時「賣出」持有的股票。

此外，若持有期間股價下跌超過停損設定（如 -5%），即使模型未發出賣出訊號，也會自動賣出止損。